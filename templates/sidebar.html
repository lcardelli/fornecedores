<link rel="stylesheet" href="/static/css/sidebar.css">

<button class="navbar-toggler" type="button" id="sidebarToggle">
    <i class="fas fa-bars"></i>
</button>

<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
    <div class="sidebar-sticky">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link {{ if eq .activeMenu "dashboard" }}active{{ end }}" href="/api/v1/dashboard">
                    <i class="fas fa-home"></i>
                    Dashboard
                </a>
            </li>

            <!-- Menu Fornecedores - Sempre visível -->
            <li class="nav-item">
                <a class="nav-link dropdown-toggle" href="#fornecedoresSubmenu" data-toggle="collapse" aria-expanded="false">
                    <i class="fas fa-building"></i>
                    Fornecedores
                </a>
                <ul class="collapse nav flex-column ml-3" id="fornecedoresSubmenu">
                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "catalogo" }}active{{ end }}" href="/api/v1/catalogo">
                            <i class="fas fa-book"></i>
                            Catálogo
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "cadastro-categoria" }}active{{ end }}" href="/api/v1/cadastro-categoria">
                            <i class="fas fa-folder-plus"></i>
                            Gerenciar Áreas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "services" }}active{{ end }}" href="/api/v1/services">
                            <i class="fas fa-cogs"></i>
                            Gerenciar Categorias
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "cadastro-produto" }}active{{ end }}" href="/api/v1/produtos">
                            <i class="fas fa-box"></i>
                            Gerenciar Produtos
                        </a>
                    </li>
                </ul>
            </li>

            <!-- Menu Licenças - Sempre visível -->
            <li class="nav-item">
                <a class="nav-link dropdown-toggle" href="#licencasSubmenu" data-toggle="collapse" aria-expanded="false">
                    <i class="fas fa-key"></i>
                    Licenças
                </a>
                <ul class="collapse nav flex-column ml-3" id="licencasSubmenu">
                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "visualizar-licencas" }}active{{ end }}" href="/api/v1/licenses/view">
                            <i class="fas fa-list"></i>
                            Visualizar Licenças
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "gerenciar-licencas" }}active{{ end }}" href="/api/v1/licenses/manage">
                            <i class="fas fa-cog"></i>
                            Gerenciar Licenças
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "softwares" }}active{{ end }}" href="/api/v1/licenses/software">
                            <i class="fas fa-laptop-code"></i>
                            Gerenciar Softwares
                        </a>
                    </li>
                </ul>
            </li>

            <!-- Menu Administração - Sempre visível -->
            <li class="nav-item">
                <a class="nav-link dropdown-toggle" href="#adminSubmenu" data-toggle="collapse" aria-expanded="false">
                    <i class="fas fa-user-shield"></i>
                    Administração
                </a>
                <ul class="collapse nav flex-column ml-3" id="adminSubmenu">
                    <li class="nav-item">
                        <a class="nav-link {{ if eq .activeMenu "manage-users" }}active{{ end }}" href="/api/v1/manage-users">
                            <i class="fas fa-users-cog"></i>
                            <span>Gerenciar Usuários</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</nav>

<div class="sidebar-overlay" id="sidebarOverlay"></div>

<script src="/static/js/sidebar.js?v=1"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebarMenu');
    const overlay = document.getElementById('sidebarOverlay');
    
    function toggleSidebar() {
        sidebar.classList.toggle('show');
        overlay.classList.toggle('show');
        document.body.style.overflow = sidebar.classList.contains('show') ? 'hidden' : '';
    }

    sidebarToggle.addEventListener('click', toggleSidebar);
    overlay.addEventListener('click', toggleSidebar);

    // Fechar o menu ao clicar em um link (em telas pequenas)
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                setTimeout(toggleSidebar, 150);
            }
        });
    });

    // Ajustar quando a tela for redimensionada
    window.addEventListener('resize', function() {
        if (window.innerWidth > 768) {
            sidebar.classList.remove('show');
            overlay.classList.remove('show');
            document.body.style.overflow = '';
        }
    });
});
</script>
